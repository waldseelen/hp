let translationCache={},currentLanguage="en",fallbackLanguage="en";function initI18n(t="en",n={}){if(currentLanguage=t,translationCache=n,!t){const t=document.documentElement.lang||"en";currentLanguage=t.split("-")[0]}}function gettext(t,n={}){return interpolateString(getTranslation(t),n)}const _=gettext;function ngettext(t,n,a,e={}){return interpolateString(getTranslation(1===a?t:n),{...e,count:a})}function getTranslation(t){return translationCache[currentLanguage]&&translationCache[currentLanguage][t]?translationCache[currentLanguage][t]:currentLanguage!==fallbackLanguage&&translationCache[fallbackLanguage]&&translationCache[fallbackLanguage][t]?translationCache[fallbackLanguage][t]:t}function interpolateString(t,n){return t.replace(/\{(\w+)\}/g,(t,a)=>n.hasOwnProperty(a)?n[a]:t)}async function loadTranslations(t){try{const n=await fetch(`/static/js/translations/${t}.json`);if(!n.ok)throw new Error(`Failed to load translations for ${t}`);const a=await n.json();return translationCache[t]||(translationCache[t]={}),Object.assign(translationCache[t],a),a}catch(t){return{}}}async function changeLanguage(t){currentLanguage=t,translationCache[t]||await loadTranslations(t);const n=new CustomEvent("language-changed",{detail:{language:t,translations:translationCache[t]}});document.dispatchEvent(n)}function getCurrentLanguage(){return currentLanguage}function hasTranslation(t){return!(!translationCache[currentLanguage]||!translationCache[currentLanguage][t])}function gettext_noop(t){return t}const N_=gettext_noop,lazy_gettext=gettext_noop;document.addEventListener("DOMContentLoaded",()=>{const t=(document.documentElement.lang||"en").split("-")[0],n=document.querySelector('script[type="application/json"][data-translations]');let a={};if(n)try{a=JSON.parse(n.textContent)}catch(t){}initI18n(t,a),a[t]||loadTranslations(t).catch(()=>{})}),window.gettext=gettext,window._=_,window.ngettext=ngettext,window.gettext_noop=gettext_noop,window.N_=N_,window.lazy_gettext=lazy_gettext,window.i18n={init:initI18n,gettext:gettext,ngettext:ngettext,changeLanguage:changeLanguage,getCurrentLanguage:getCurrentLanguage,loadTranslations:loadTranslations,hasTranslation:hasTranslation,_:_,N_:N_},"undefined"!=typeof module&&module.exports&&(module.exports={gettext:gettext,ngettext:ngettext,gettext_noop:gettext_noop,initI18n:initI18n,changeLanguage:changeLanguage,getCurrentLanguage:getCurrentLanguage,loadTranslations:loadTranslations,hasTranslation:hasTranslation,_:_,N_:N_});
//# sourceMappingURL=i18n.min.js.map
//# sourceMappingURL=i18n.min.js.map