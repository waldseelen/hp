class LanguageManager{constructor(){this.currentLanguage=this.getStoredLanguage()||this.detectSystemLanguage()||"tr",this.init()}init(){this.applyLanguage(this.currentLanguage),this.bindEvents(),this.updateToggleButtons(),this.currentLanguage}getStoredLanguage(){return localStorage.getItem("portfolio-language")}detectSystemLanguage(){const e=navigator.language.toLowerCase();return e.startsWith("tr")?"tr":e.startsWith("en")?"en":"tr"}toggleLanguage(){const e="tr"===this.currentLanguage?"en":"tr";this.setLanguage(e)}setLanguage(e){["tr","en"].includes(e)?(this.currentLanguage=e,localStorage.setItem("portfolio-language",e),this.applyLanguage(e),this.updateToggleButtons(),this.setDjangoCookie(e),window.dispatchEvent(new CustomEvent("languageChanged",{detail:{language:e}})),this.notifyDjangoLanguageChange(e)):console.warn("Unsupported language:",e)}setDjangoCookie(e){document.cookie=`django_language=${e}; path=/; max-age=31536000; SameSite=Lax`}notifyDjangoLanguageChange(e){const t=new FormData;t.append("language",e),t.append("next",window.location.pathname);const a=document.querySelector("[name=csrf-token]")?.getAttribute("content")||document.querySelector("[name=csrfmiddlewaretoken]")?.value;a&&t.append("csrfmiddlewaretoken",a),fetch("/i18n/setlang/",{method:"POST",body:t,credentials:"same-origin"}).then(()=>{window.location.reload()}).catch(e=>{console.warn("Language change notification failed:",e),window.location.reload()})}applyLanguage(e){document.documentElement.lang=e,document.body.className=document.body.className.replace(/\blang-\w+\b/g,"")+` lang-${e}`,this.updateMetaTags(e),this.updateJavaScriptStrings(e)}updateMetaTags(e){let t=document.querySelector('meta[name="language"]');t||(t=document.createElement("meta"),t.name="language",document.head.appendChild(t)),t.content=e,this.updateAlternateLinks(e)}updateAlternateLinks(e){document.querySelectorAll('link[rel="alternate"][hreflang]').forEach(e=>{e.remove()});const t=window.location.pathname;["tr","en"].forEach(e=>{const a=document.createElement("link");a.rel="alternate",a.hreflang=e,a.href=`${window.location.origin}${t}?lang=${e}`,document.head.appendChild(a)});const a=document.createElement("link");a.rel="alternate",a.hreflang="x-default",a.href=`${window.location.origin}${t}`,document.head.appendChild(a)}updateJavaScriptStrings(e){window.translations=this.getTranslations(e),this.updateDynamicContent(e)}getTranslations(e){const t={tr:{home:"Ana Sayfa",about:"Hakkımda",projects:"Projeler",blog:"Blog",tools:"Araçlar",contact:"İletişim",search:"Ara",search_placeholder:"Blog, proje veya içerik ara...",loading:"Yükleniyor...",load_more:"Daha Fazla Yükle",back_to_top:"Başa Dön",name:"İsim",email:"E-posta",message:"Mesaj",send:"Gönder",sending:"Gönderiliyor...",sent:"Gönderildi",error:"Hata",read_time:"dakika okuma",published:"Yayınlandı",updated:"Güncellendi",success_message:"İşlem başarıyla tamamlandı",error_message:"Bir hata oluştu",network_error:"Bağlantı hatası"},en:{home:"Home",about:"About",projects:"Projects",blog:"Blog",tools:"Tools",contact:"Contact",search:"Search",search_placeholder:"Search blog, projects or content...",loading:"Loading...",load_more:"Load More",back_to_top:"Back to Top",name:"Name",email:"Email",message:"Message",send:"Send",sending:"Sending...",sent:"Sent",error:"Error",read_time:"min read",published:"Published",updated:"Updated",success_message:"Operation completed successfully",error_message:"An error occurred",network_error:"Network error"}};return t[e]||t.tr}updateDynamicContent(e){document.querySelectorAll("[data-translate]").forEach(e=>{const t=e.getAttribute("data-translate");window.translations[t]&&(e.textContent=window.translations[t])});document.querySelectorAll("[data-translate-placeholder]").forEach(e=>{const t=e.getAttribute("data-translate-placeholder");window.translations[t]&&(e.placeholder=window.translations[t])});document.querySelectorAll("[data-translate-title]").forEach(e=>{const t=e.getAttribute("data-translate-title");window.translations[t]&&(e.title=window.translations[t])})}updateToggleButtons(){document.querySelectorAll("[data-language-switch]").forEach(e=>{e.getAttribute("data-language-switch")===this.currentLanguage?(e.className="px-2 py-1 text-xs font-medium rounded transition-colors duration-200 bg-primary-600 text-white",e.setAttribute("aria-pressed","true"),e.removeAttribute("x-bind:class")):(e.className="px-2 py-1 text-xs font-medium rounded transition-colors duration-200",e.setAttribute("x-bind:class","{ 'text-gray-300 hover:text-white hover:bg-gray-700': darkMode, 'text-gray-600 hover:text-gray-900 hover:bg-gray-300': !darkMode }"),e.setAttribute("aria-pressed","false")),this.updateButtonText(e)});document.querySelectorAll('[data-toggle="language"]').forEach(e=>{this.updateButtonText(e)})}updateButtonText(e){const t={tr:"TR",en:"EN"};if(e.hasAttribute("data-show-current")&&(e.textContent=t[this.currentLanguage]),e.hasAttribute("data-show-alternative")){const a="tr"===this.currentLanguage?"en":"tr";e.textContent=t[a]}}bindEvents(){document.addEventListener("click",e=>{if(e.target.hasAttribute("data-language-switch")){e.preventDefault();const t=e.target.getAttribute("data-language-switch");this.setLanguage(t)}e.target.hasAttribute("data-toggle")&&"language"===e.target.getAttribute("data-toggle")&&(e.preventDefault(),this.toggleLanguage())}),document.addEventListener("keydown",e=>{e.altKey&&"l"===e.key.toLowerCase()&&(e.preventDefault(),this.toggleLanguage())}),window.addEventListener("languagechange",()=>{if(!this.getStoredLanguage()){const e=this.detectSystemLanguage();e!==this.currentLanguage&&this.setLanguage(e)}})}getCurrentLanguage(){return this.currentLanguage}onLanguageChange(e){window.addEventListener("languageChanged",t=>{e(t.detail.language)})}}let languageManager;"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{languageManager=new LanguageManager,window.languageManager=languageManager}):(languageManager=new LanguageManager,window.languageManager=languageManager),window.t=function(e,t=e){return window.translations&&window.translations[e]||t},"undefined"!=typeof module&&module.exports&&(module.exports=LanguageManager);
//# sourceMappingURL=language-manager.min.js.map