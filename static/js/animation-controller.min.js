class AnimationController{constructor(e={}){this.options={threshold:.1,rootMargin:"50px 0px",animateOnce:!0,enableParallax:!0,respectReducedMotion:!0,...e},this.observers=[],this.animatedElements=new Set,this.parallaxElements=[],this.reducedMotion=!1,this.init()}init(){this.checkReducedMotion(),this.initScrollAnimations(),this.initParallaxAnimations(),this.initStaggerAnimations(),this.bindEvents(),this.initPerformanceMonitoring()}checkReducedMotion(){if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion: reduce)");this.reducedMotion=e.matches,e.addEventListener("change",e=>{this.reducedMotion=e.matches,this.updateAnimationsForReducedMotion()})}"true"===localStorage.getItem("reduced-motion")&&(this.reducedMotion=!0)}updateAnimationsForReducedMotion(){this.reducedMotion?(document.body.classList.add("reduced-motion"),this.disableHeavyAnimations()):(document.body.classList.remove("reduced-motion"),this.enableAnimations())}initScrollAnimations(){const e=new IntersectionObserver(e=>this.handleScrollReveal(e),{threshold:this.options.threshold,rootMargin:this.options.rootMargin});document.querySelectorAll("\n      .scroll-reveal,\n      .scroll-scale,\n      .animate-fade-in,\n      .animate-fade-in-up,\n      .animate-fade-in-down,\n      .animate-fade-in-left,\n      .animate-fade-in-right,\n      .animate-scale-in,\n      .animate-slide-up,\n      .animate-slide-down,\n      .animate-bounce-in\n    ").forEach(t=>{t.classList.contains("revealed")||(t.style.animationPlayState="paused"),e.observe(t)}),this.observers.push(e)}handleScrollReveal(e){e.forEach(e=>{if(e.isIntersecting){const t=e.target;if(this.options.animateOnce&&this.animatedElements.has(t))return;this.triggerAnimation(t),this.animatedElements.add(t),this.options.animateOnce&&e.target.removeAttribute("data-animate-on-scroll")}})}triggerAnimation(e){if(this.reducedMotion&&this.options.respectReducedMotion)return void e.classList.add("revealed");e.classList.add("revealed"),"paused"===e.style.animationPlayState&&(e.style.animationPlayState="running"),e.classList.add("will-animate");const t=this.getAnimationDuration(e);setTimeout(()=>{e.classList.remove("will-animate"),e.classList.add("will-animate-complete")},t),e.dispatchEvent(new CustomEvent("animation-start",{detail:{element:e,timestamp:performance.now()}}))}initStaggerAnimations(){document.querySelectorAll(".animate-stagger").forEach(e=>{e.children;const t=new IntersectionObserver(n=>{n.forEach(n=>{n.isIntersecting&&(this.triggerStaggerAnimation(e),t.unobserve(n.target))})},{threshold:.2,rootMargin:"0px 0px -50px 0px"});t.observe(e),this.observers.push(t)})}triggerStaggerAnimation(e){const t=Array.from(e.children);t.forEach((e,t)=>{setTimeout(()=>{this.reducedMotion?(e.style.opacity="1",e.style.transform="none"):(e.classList.add("revealed"),e.style.animationPlayState="running")},100*t)})}initParallaxAnimations(){if(!this.options.enableParallax||this.reducedMotion)return;if(this.parallaxElements=Array.from(document.querySelectorAll("[data-parallax]")),0===this.parallaxElements.length)return;let e=!1;window.addEventListener("scroll",()=>{e||(requestAnimationFrame(()=>{this.updateParallaxElements(),e=!1}),e=!0)},{passive:!0})}updateParallaxElements(){const e=window.pageYOffset,t=window.innerHeight;this.parallaxElements.forEach(n=>{const i=n.getBoundingClientRect(),a=i.top+e;i.height;if(i.bottom>=0&&i.top<=t){const t=parseFloat(n.dataset.parallax)||.5,i=-(e-a)*t;n.style.transform=`translate3d(0, ${i}px, 0)`}})}initPerformanceMonitoring(){let e=0,t=performance.now();const n=()=>{const i=performance.now(),a=i-t;if(e++,e>=60){const n=Math.round(1e3/(a/e));n<50?this.reduceAnimationQuality():n>55&&this.restoreAnimationQuality(),e=0,t=i}requestAnimationFrame(n)};"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname||requestAnimationFrame(n)}reduceAnimationQuality(){console.warn("ðŸŽ¬ Reducing animation quality due to low FPS"),document.body.classList.add("low-performance"),this.disableHeavyAnimations()}restoreAnimationQuality(){document.body.classList.contains("low-performance")&&(document.body.classList.remove("low-performance"),this.reducedMotion||this.enableAnimations())}disableHeavyAnimations(){document.querySelectorAll("\n      .animate-pulse-subtle,\n      .animate-breathe,\n      .parallax-layer,\n      [data-parallax]\n    ").forEach(e=>{e.style.animation="none",e.style.transform="none"})}enableAnimations(){document.querySelectorAll("\n      .animate-pulse-subtle,\n      .animate-breathe,\n      .parallax-layer,\n      [data-parallax]\n    ").forEach(e=>{e.style.animation="",e.style.transform=""})}getAnimationDuration(e){const t=getComputedStyle(e).animationDuration;return"0s"===t?300:1e3*parseFloat(t)}bindEvents(){document.addEventListener("visibilitychange",()=>{document.hidden?this.pauseAnimations():this.resumeAnimations()}),window.addEventListener("beforeunload",()=>{this.cleanup()}),document.addEventListener("keydown",e=>{e.ctrlKey&&e.altKey&&"m"===e.key&&this.toggleReducedMotion()})}pauseAnimations(){document.querySelectorAll('[class*="animate-"]').forEach(e=>{e.style.animationPlayState="paused"})}resumeAnimations(){if(!this.reducedMotion){document.querySelectorAll('[class*="animate-"]').forEach(e=>{e.style.animationPlayState="running"})}}toggleReducedMotion(){this.reducedMotion=!this.reducedMotion,localStorage.setItem("reduced-motion",this.reducedMotion.toString()),this.updateAnimationsForReducedMotion(),this.reducedMotion}animateElement(e,t,n={}){const{delay:i=0,duration:a=null,callback:o=null}=n;setTimeout(()=>{if(a&&(e.style.animationDuration=`${a}ms`),e.classList.add(t),o){const t=a||this.getAnimationDuration(e);setTimeout(o,t)}},i)}createStaggeredAnimation(e,t,n=100){e.forEach((e,i)=>{this.animateElement(e,t,{delay:i*n})})}cleanup(){this.observers.forEach(e=>e.disconnect()),this.observers=[],this.animatedElements.clear(),this.parallaxElements=[]}static isElementInViewport(e,t=0){const n=e.getBoundingClientRect(),i=window.innerHeight,a=window.innerWidth;return n.top>=-t&&n.left>=-t&&n.bottom<=i+t&&n.right<=a+t}static waitForAnimation(e){return new Promise(t=>{const n=()=>{e.removeEventListener("animationend",n),t()};e.addEventListener("animationend",n)})}}document.addEventListener("DOMContentLoaded",()=>{window.animationController=new AnimationController,document.documentElement.classList.add("js-animations-available")}),"undefined"!=typeof module&&module.exports&&(module.exports=AnimationController),window.AnimationController=AnimationController;
//# sourceMappingURL=animation-controller.min.js.map