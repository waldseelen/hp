class ReducedMotionManager{constructor(){this.isReducedMotion=!1,this.userPreference=null,this.systemPreference=!1,this.animationElements=new Map,this.observedElements=new Set,this.init()}init(){this.detectSystemPreference(),this.loadUserPreference(),this.updateMotionState(),this.createMotionToggle(),this.bindEvents(),this.startMonitoring()}detectSystemPreference(){if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion: reduce)");this.systemPreference=e.matches,e.addEventListener("change",e=>{this.systemPreference=e.matches,null===this.userPreference&&this.updateMotionState()}),this.systemPreference}}loadUserPreference(){const e=localStorage.getItem("motion-preference");null!==e&&(this.userPreference="reduced"===e,this.userPreference)}updateMotionState(){this.isReducedMotion=null!==this.userPreference?this.userPreference:this.systemPreference,this.isReducedMotion?this.enableReducedMotion():this.disableReducedMotion(),this.notifyMotionChange()}enableReducedMotion(){document.documentElement.classList.add("reduced-motion"),document.body.classList.add("prefers-reduced-motion"),this.disableHeavyAnimations(),this.convertAnimationsToInstant(),this.updateToggleUI(!0)}disableReducedMotion(){document.documentElement.classList.remove("reduced-motion"),document.body.classList.remove("prefers-reduced-motion"),this.enableAnimations(),this.updateToggleUI(!1)}disableHeavyAnimations(){[".animate-pulse-subtle",".animate-breathe",".loading-spinner",".loading-dots","[data-parallax]",".parallax-layer"].forEach(e=>{document.querySelectorAll(e).forEach(e=>{this.animationElements.set(e,{originalAnimation:e.style.animation||"",originalTransition:e.style.transition||"",originalTransform:e.style.transform||""}),e.style.animation="none",e.style.transition="none"})})}convertAnimationsToInstant(){document.querySelectorAll("\n      .animate-fade-in,\n      .animate-fade-in-up,\n      .animate-fade-in-down,\n      .animate-fade-in-left,\n      .animate-fade-in-right,\n      .animate-scale-in,\n      .animate-slide-up,\n      .animate-slide-down,\n      .scroll-reveal,\n      .scroll-scale\n    ").forEach(e=>{e.style.opacity="1",e.style.transform="none",e.classList.add("reduced-motion-instant")})}enableAnimations(){this.animationElements.forEach((e,t)=>{t.style.animation=e.originalAnimation,t.style.transition=e.originalTransition,t.style.transform=e.originalTransform}),this.animationElements.clear();document.querySelectorAll(".reduced-motion-instant").forEach(e=>{e.style.opacity="",e.style.transform="",e.classList.remove("reduced-motion-instant")})}createMotionToggle(){const e=document.createElement("button");e.className="motion-toggle",e.setAttribute("aria-label","Toggle animation preferences"),e.setAttribute("title","Toggle reduced motion"),e.innerHTML='\n      <svg class="motion-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">\n        <path class="motion-on" d="M10 2L6 6h3v8h2V6h3l-4-4z" />\n        <path class="motion-off" d="M2 2h16v2H2V2zm0 4h16v2H2V6zm0 4h16v2H2v-2zm0 4h16v2H2v-2z" style="display: none;" />\n      </svg>\n      <span class="motion-label">Animations</span>\n    ';const t=document.createElement("style");t.textContent="\n      .motion-toggle {\n        position: fixed;\n        bottom: 20px;\n        right: 20px;\n        z-index: 1000;\n        background: var(--bg-secondary, #1e293b);\n        color: var(--text-primary, #f8fafc);\n        border: 1px solid var(--border-color, #374151);\n        border-radius: 8px;\n        padding: 12px 16px;\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        font-size: 14px;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n      }\n      \n      .motion-toggle:hover {\n        background: var(--bg-tertiary, #334155);\n        transform: translateY(-1px);\n        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);\n      }\n      \n      .motion-toggle:focus {\n        outline: 2px solid var(--primary-500, #3b82f6);\n        outline-offset: 2px;\n      }\n      \n      .reduced-motion .motion-toggle {\n        transition: none;\n        transform: none !important;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;\n      }\n      \n      .motion-icon {\n        flex-shrink: 0;\n      }\n      \n      .reduced-motion .motion-on {\n        display: none;\n      }\n      \n      .reduced-motion .motion-off {\n        display: block !important;\n      }\n      \n      @media (max-width: 768px) {\n        .motion-toggle {\n          bottom: 80px; /* Above mobile navigation */\n        }\n        \n        .motion-label {\n          display: none;\n        }\n      }\n      \n      @media print {\n        .motion-toggle {\n          display: none;\n        }\n      }\n    ",document.head.appendChild(t),e.addEventListener("click",()=>{this.toggleUserPreference()}),document.body.appendChild(e),this.toggleElement=e}updateToggleUI(e){if(!this.toggleElement)return;const t=this.toggleElement.querySelector(".motion-label");t&&(t.textContent=e?"Reduced Motion":"Animations"),this.toggleElement.setAttribute("aria-label",(e?"Enable":"Disable")+" animations"),this.toggleElement.setAttribute("title",(e?"Enable":"Disable")+" animations and motion effects")}toggleUserPreference(){this.userPreference=!this.isReducedMotion,localStorage.setItem("motion-preference",this.userPreference?"reduced":"full"),this.userPreference,this.updateMotionState(),this.showToast(this.userPreference?"Animations disabled for better accessibility":"Animations enabled")}showToast(e){const t=document.createElement("div");t.className="motion-toast",t.textContent=e;if(!document.querySelector("style[data-motion-toast]")){const e=document.createElement("style");e.setAttribute("data-motion-toast",""),e.textContent="\n      .motion-toast {\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        z-index: 1001;\n        background: var(--bg-secondary, #1e293b);\n        color: var(--text-primary, #f8fafc);\n        border: 1px solid var(--border-color, #374151);\n        border-radius: 8px;\n        padding: 12px 16px;\n        font-size: 14px;\n        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n        opacity: 0;\n        transform: translateX(100%);\n        transition: all 0.3s ease;\n      }\n      \n      .motion-toast.show {\n        opacity: 1;\n        transform: translateX(0);\n      }\n      \n      .reduced-motion .motion-toast {\n        transition: none;\n        opacity: 1 !important;\n        transform: translateX(0) !important;\n      }\n    ",document.head.appendChild(e)}document.body.appendChild(t),requestAnimationFrame(()=>{t.classList.add("show")}),setTimeout(()=>{this.isReducedMotion?t.remove():(t.style.opacity="0",t.style.transform="translateX(100%)",setTimeout(()=>t.remove(),300))},3e3)}bindEvents(){document.addEventListener("keydown",e=>{e.ctrlKey&&e.altKey&&"m"===e.key.toLowerCase()&&(e.preventDefault(),this.toggleUserPreference())}),document.addEventListener("visibilitychange",()=>{document.hidden&&this.isReducedMotion&&this.pauseAllAnimations()})}pauseAllAnimations(){document.querySelectorAll('[class*="animate-"]').forEach(e=>{e.style.animationPlayState="paused"})}startMonitoring(){new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.forEach(e=>{1===e.nodeType&&this.isReducedMotion&&this.processNewElement(e)})})}).observe(document.body,{childList:!0,subtree:!0})}processNewElement(e){e.matches('[class*="animate-"]')&&(e.style.animation="none",e.style.transition="none",e.style.opacity="1",e.style.transform="none");e.querySelectorAll('[class*="animate-"]').forEach(e=>{e.style.animation="none",e.style.transition="none",e.style.opacity="1",e.style.transform="none"})}notifyMotionChange(){document.dispatchEvent(new CustomEvent("motionpreference-change",{detail:{isReducedMotion:this.isReducedMotion,userPreference:this.userPreference,systemPreference:this.systemPreference}}))}getMotionPreference(){return{isReducedMotion:this.isReducedMotion,userPreference:this.userPreference,systemPreference:this.systemPreference}}setUserPreference(e){this.userPreference=e,localStorage.setItem("motion-preference",e?"reduced":"full"),this.updateMotionState()}resetToSystemDefault(){this.userPreference=null,localStorage.removeItem("motion-preference"),this.updateMotionState(),this.showToast("Reset to system default motion preference")}}document.addEventListener("DOMContentLoaded",()=>{window.reducedMotionManager=new ReducedMotionManager}),"undefined"!=typeof module&&module.exports&&(module.exports=ReducedMotionManager),window.ReducedMotionManager=ReducedMotionManager;
//# sourceMappingURL=reduced-motion-manager.min.js.map