class LanguageAutoDetect{constructor(){this.supportedLanguages=["tr","en"],this.defaultLanguage="en",this.currentLanguage=this.getCurrentLanguage(),this.init()}init(){this.hasLanguagePreference()||this.autoDetectLanguage(),this.setupLanguageSwitcher(),this.setupPagePersistence()}autoDetectLanguage(){const e=navigator.languages||[navigator.language||navigator.userLanguage];for(const t of e){const e=t.split("-")[0].toLowerCase();if(this.supportedLanguages.includes(e))return this.setLanguagePreference(e),void(this.currentLanguage!==e&&this.switchToLanguage(e,!1))}this.defaultLanguage,this.setLanguagePreference(this.defaultLanguage)}setupLanguageSwitcher(){}setupPagePersistence(){this.currentPath=window.location.pathname,this.currentSearch=window.location.search,document.addEventListener("language-switched",e=>{this.handleLanguageSwitch(e.detail)})}switchToLanguage(e,t=!0){if(!this.supportedLanguages.includes(e))return void console.warn(`[Language] Unsupported language: ${e}`);this.setLanguagePreference(e),t&&this.showLanguageSwitchFeedback(e);const a=this.buildLanguageUrl(e),n=new CustomEvent("language-switched",{detail:{from:this.currentLanguage,to:e,url:a}});document.dispatchEvent(n),window.location.href=a}buildLanguageUrl(e){const t=window.location.origin;let a=this.currentPath,n=this.currentSearch;const g=new URLSearchParams(n);g.set("lang",e);const r=g.toString();return`${t}${a}${r?"?"+r:""}`}showLanguageSwitchFeedback(e){let t=document.getElementById("language-switch-indicator");t||(t=document.createElement("div"),t.id="language-switch-indicator",t.className="fixed top-4 right-4 bg-primary-600 text-white px-4 py-2 rounded-lg shadow-lg z-50 transition-all duration-300",document.body.appendChild(t));const a="tr"===e?"Türkçe":"English";t.textContent=`${gettext?gettext("Switching to"):"Switching to"} ${a}...`,t.style.opacity="1",t.style.transform="translateX(0)",setTimeout(()=>{t&&(t.style.opacity="0",t.style.transform="translateX(100%)")},1500)}updateLanguageSwitcherState(){document.querySelectorAll("[data-language-switch]").forEach(e=>{e.getAttribute("data-language-switch")===this.currentLanguage?(e.classList.add("active","font-semibold"),e.setAttribute("aria-current","true")):(e.classList.remove("active","font-semibold"),e.removeAttribute("aria-current"))})}getCurrentLanguage(){const e=new URLSearchParams(window.location.search).get("lang");if(e&&this.supportedLanguages.includes(e))return e;const t=document.documentElement.lang;if(t&&this.supportedLanguages.includes(t.split("-")[0]))return t.split("-")[0];const a=localStorage.getItem("preferred-language");return a&&this.supportedLanguages.includes(a)?a:this.defaultLanguage}hasLanguagePreference(){const e=new URLSearchParams(window.location.search).get("lang"),t=localStorage.getItem("preferred-language");return!(!e&&!t)}setLanguagePreference(e){localStorage.setItem("preferred-language",e),document.documentElement.lang=e,this.currentLanguage=e}handleLanguageSwitch(e){e.from,e.to,window.gtag&&gtag("event","language_switch",{from_language:e.from,to_language:e.to}),this.updateLanguageDependentContent(e.to)}updateLanguageDependentContent(e){document.documentElement.dir="ltr";document.querySelectorAll("[data-current-language]").forEach(t=>{t.textContent="tr"===e?"Türkçe":"English"})}getLanguagePreference(){return{current:this.currentLanguage,stored:localStorage.getItem("preferred-language"),browser:navigator.language,supported:this.supportedLanguages}}}document.addEventListener("DOMContentLoaded",()=>{window.languageAutoDetect=new LanguageAutoDetect}),window.LanguageAutoDetect=LanguageAutoDetect;
//# sourceMappingURL=language-auto-detect.min.js.map
