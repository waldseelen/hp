{% extends "base.html" %}
{% load static i18n %}

{% block title %}{% trans 'Data Export - Portfolio' %}{% endblock %}

{% block extra_head %}
<meta name="description" content="Export your personal data in portable formats." />
{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8 max-w-4xl">
    <div class="bg-gray-800/50 backdrop-blur-md rounded-xl shadow-2xl border border-gray-700/50 p-8">
        <div class="mb-8">
            <h1 class="text-4xl font-bold bg-gradient-to-r from-primary-400 to-primary-600 bg-clip-text text-transparent mb-4">
                {% trans 'Data export' %}
            </h1>
            <p class="text-gray-300 text-lg">
                {% trans 'Download a copy of the personal data we store, in line with GDPR portability requirements.' %}
            </p>
            <div class="w-24 h-1 bg-gradient-to-r from-primary-400 to-primary-600 rounded-full mt-4"></div>
        </div>

        <div class="space-y-8">
            <section class="bg-blue-900/20 border border-blue-700/30 rounded-lg p-6">
                <div class="flex items-start">
                    <svg class="w-6 h-6 text-blue-400 mr-3 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    <div>
                        <h3 class="text-lg font-semibold text-blue-300 mb-2">{% trans 'Your right to portability' %}</h3>
                        <p class="text-blue-200 text-sm leading-relaxed">
                            {% trans 'You can request a copy of the personal data stored about your account in machine-readable formats. This right is granted under GDPR Article 20 and equivalent local regulations.' %}
                        </p>
                    </div>
                </div>
            </section>

            <section>
                <h2 class="text-2xl font-semibold text-white mb-4 flex items-center">
                    <svg class="w-6 h-6 text-primary-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
                    </svg>
                    {% trans 'Select export format' %}
                </h2>

                <form method="post" class="space-y-6">
                    {% csrf_token %}

                    <div class="grid md:grid-cols-3 gap-4">
                        <label class="relative cursor-pointer">
                            <input type="radio" name="format" value="json" class="sr-only peer" checked>
                            <div class="bg-gray-700/30 border border-gray-600 peer-checked:border-primary-500 peer-checked:bg-primary-900/20 rounded-lg p-6 transition-all hover:bg-gray-700/50">
                                <div class="flex items-center justify-center mb-3">
                                    <svg class="w-8 h-8 text-primary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/>
                                    </svg>
                                </div>
                                <h3 class="text-lg font-semibold text-white text-center mb-2">JSON</h3>
                                <p class="text-gray-300 text-sm text-center mb-2">{% trans 'Structured and developer-friendly' %}</p>
                                <ul class="text-xs text-gray-400 space-y-1">
                                    <li>• {% trans 'Ideal for integrations' %}</li>
                                    <li>• {% trans 'Preserves full schema' %}</li>
                                    <li>• {% trans 'UTF-8 encoded' %}</li>
                                </ul>
                            </div>
                        </label>

                        <label class="relative cursor-pointer">
                            <input type="radio" name="format" value="csv" class="sr-only peer">
                            <div class="bg-gray-700/30 border border-gray-600 peer-checked:border-primary-500 peer-checked:bg-primary-900/20 rounded-lg p-6 transition-all hover:bg-gray-700/50">
                                <div class="flex items-center justify-center mb-3">
                                    <svg class="w-8 h-8 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                    </svg>
                                </div>
                                <h3 class="text-lg font-semibold text-white text-center mb-2">CSV</h3>
                                <p class="text-gray-300 text-sm text-center mb-2">{% trans 'Spreadsheet compatible' %}</p>
                                <ul class="text-xs text-gray-400 space-y-1">
                                    <li>• {% trans 'Great for quick reviews' %}</li>
                                    <li>• {% trans 'Imports into Excel or Sheets' %}</li>
                                    <li>• {% trans 'Comma separated values' %}</li>
                                </ul>
                            </div>
                        </label>

                        <label class="relative cursor-pointer">
                            <input type="radio" name="format" value="pdf" class="sr-only peer">
                            <div class="bg-gray-700/30 border border-gray-600 peer-checked:border-primary-500 peer-checked:bg-primary-900/20 rounded-lg p-6 transition-all hover:bg-gray-700/50">
                                <div class="flex items-center justify-center mb-3">
                                    <svg class="w-8 h-8 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a2 2 0 00-.586-1.414l-4.414-4.414A2 2 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                                    </svg>
                                </div>
                                <h3 class="text-lg font-semibold text-white text-center mb-2">PDF</h3>
                                <p class="text-gray-300 text-sm text-center mb-2">{% trans 'Readable summary' %}</p>
                                <ul class="text-xs text-gray-400 space-y-1">
                                    <li>• {% trans 'Perfect for archiving' %}</li>
                                    <li>• {% trans 'Human-friendly layout' %}</li>
                                    <li>• {% trans 'Ready to share internally' %}</li>
                                </ul>
                            </div>
                        </label>
                    </div>

                    <div class="bg-gray-700/30 border border-gray-600 rounded-lg p-6">
                        <h3 class="text-lg font-semibold text-white mb-3">{% trans 'What is included?' %}</h3>
                        <ul class="list-disc pl-6 text-sm text-gray-300 space-y-2">
                            <li>{% trans 'Profile data (name, email, preferences)' %}</li>
                            <li>{% trans 'Project and snippet metadata' %}</li>
                            <li>{% trans 'Contact messages and support history' %}</li>
                            <li>{% trans 'Consent and cookie decisions' %}</li>
                            <li>{% trans 'Activity logs relevant to your account' %}</li>
                        </ul>
                    </div>

                    <div class="text-sm text-gray-400">
                        <h3 class="text-lg font-semibold text-white mb-3">{% trans 'How long does it take?' %}</h3>
                        <p class="leading-relaxed mb-3">{% trans 'Exports are processed automatically and typically complete within a few minutes. You will receive an email once the archive is ready.' %}</p>
                        <p class="leading-relaxed">{% trans 'If your request requires manual review we will reach out within 72 hours.' %}</p>
                    </div>

                    <div class="flex items-center justify-between bg-black/30 border border-white/10 rounded-lg p-4 text-sm text-gray-300">
                        <span>{% trans 'Email address for delivery' %}</span>
                        <span class="text-white font-medium">{{ user.email }}</span>
                    </div>

                    <div class="flex items-center">
                        <input id="confirm" name="confirm" type="checkbox" required class="w-4 h-4 text-primary-500 focus:ring-primary-400 border-gray-600 rounded">
                        <label for="confirm" class="ml-3 text-sm text-gray-300">
                            {% trans 'I understand that the exported file will contain personal information and agree to store it securely.' %}
                        </label>
                    </div>

                    <div class="flex items-center justify-end space-x-3">
                        <a href="{% url 'gdpr:privacy_dashboard' %}" class="btn btn--ghost">{% trans 'Back to dashboard' %}</a>
                        <button type="submit" class="btn btn--primary">{% trans 'Generate export' %}</button>
                    </div>
                </form>
            </section>

            <section class="bg-gray-700/30 border border-gray-600 rounded-lg p-6">
                <h3 class="text-lg font-semibold text-white mb-3">{% trans 'Need additional assistance?' %}</h3>
                <p class="text-gray-300 text-sm mb-3">{% trans 'Our privacy team can help with custom export requirements or questions about your data.' %}</p>
                <a href="mailto:privacy@bugraak.in" class="btn btn--secondary" data-cursor-interactive>privacy@bugraak.in</a>
                <p class="text-xs text-gray-500 mt-3">{% trans 'Typical response time is under 3 business days.' %}</p>
            </section>
        </div>
    </div>
</div>
{% endblock %}
