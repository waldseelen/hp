
{% extends 'base/base.html' %}
{% load i18n %}

{% block title %}{% trans "Tag Cloud" %}{% endblock %}

{% block extra_head %}
<style>
  .tag-cloud {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
    justify-content: center;
  }

  .tag-cloud a {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    border-radius: var(--radius-full);
    border: 1px solid rgba(148, 163, 184, 0.18);
    transition: transform var(--motion-duration-sm) var(--motion-ease-emphasized);
    background: rgba(255, 255, 255, 0.04);
  }

  .tag-cloud a:hover,
  .tag-cloud a:focus-visible {
    transform: translateY(-2px);
    border-color: rgba(230, 197, 71, 0.45);
    color: var(--color-primary);
  }

  .tag-size-1 { font-size: 0.85rem; }
  .tag-size-2 { font-size: 1rem; }
  .tag-size-3 { font-size: 1.15rem; font-weight: var(--font-weight-medium); }
  .tag-size-4 { font-size: 1.3rem; font-weight: var(--font-weight-semibold); }
  .tag-size-5 { font-size: 1.5rem; font-weight: var(--font-weight-bold); }
</style>
{% endblock %}

{% block content %}
<section class="page-section">
  <div class="ds-container stack" style="gap: var(--space-6);">
    <header class="stack" style="gap: var(--space-2); text-align: center;">
      <span class="text-eyebrow">{% trans "Search" %}</span>
      <h1 class="heading-display-lg">{% trans "Popular Tags" %}</h1>
      <p class="section-subheading">{% blocktrans with total=total_tags %}Explore {{ total }} tags across the site.{% endblocktrans %}</p>
    </header>

    {% if categories %}
      <div class="cluster" style="justify-content: center;">
        {% for category in categories %}
          <span class="badge">{{ category.display_name }} Â· {{ category.count }}</span>
        {% endfor %}
      </div>
    {% endif %}

    {% if tag_cloud %}
      <div class="surface surface--elevated stack" style="gap: var(--space-4);">
        <div class="tag-cloud" id="tagCloud">
          {% for tag in tag_cloud %}
            <a href="{% url 'main:search_by_tag' tag.name %}" class="tag-size-{{ tag.size }}" data-count="{{ tag.count }}">
              <span>{{ tag.name }}</span>
              <span class="text-muted" style="font-size: var(--font-size-xs);">{{ tag.count }}</span>
            </a>
          {% endfor %}
        </div>
      </div>
    {% else %}
      <div class="surface" role="status">
        <p class="text-muted">{% trans "No tags available yet." %}</p>
      </div>
    {% endif %}
  </div>
</section>
{% endblock %}
