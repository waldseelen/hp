
[tool:pytest]
# ==========================================================================
# PYTEST.INI - Django Test Configuration
# ==========================================================================
# Comprehensive pytest configuration for Django portfolio project
# Supports unit testing, integration testing, and coverage reporting
# ==========================================================================

# Django Settings
DJANGO_SETTINGS_MODULE = project.settings.simple
python_files = tests.py test_*.py *_tests.py
python_classes = Test*
python_functions = test_*

# Test Discovery
testpaths =
    tests/
    apps/main/tests.py
    apps/blog/tests.py
    apps/contact/tests.py
    apps/tools/tests.py

# Test Markers
markers =
    unit: Unit tests that test individual functions/methods
    integration: Integration tests that test multiple components
    e2e: End-to-end tests that test full user workflows
    slow: Tests that take longer than usual to run
    api: Tests for API endpoints
    models: Tests for Django models
    views: Tests for Django views
    forms: Tests for Django forms
    utils: Tests for utility functions
    performance: Performance and load tests
    security: Security-related tests
    ui: UI/UX component tests from Phase 7
    visual: Visual regression tests for UI components
    responsive: Responsive design tests
    accessibility: Accessibility feature tests
    theme: Theme switching and dark mode tests
    animation: Animation and interaction tests
    search: Search functionality tests
    cache: Cache-related tests
    database: Database operation tests
    auth: Authentication tests
    email: Email functionality tests

# Test Options and Coverage
addopts =
    --strict-markers
    --strict-config
    --verbose
    --tb=short
    --cov=main
    --cov=blog
    --cov=contact
    --cov=tools
    --cov-report=term-missing
    --cov-report=html:htmlcov
    --cov-report=xml:coverage.xml
    --cov-fail-under=85
    --reuse-db
    --nomigrations
    --disable-warnings
    --numprocesses=auto
    --dist=worksteal

# Filter Warnings
filterwarnings =
    ignore::django.utils.deprecation.RemovedInDjango50Warning
    ignore::django.utils.deprecation.RemovedInDjango51Warning
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# Database configuration handled by Django settings and pytest-django

# Logging Configuration for Tests
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Performance Settings
timeout = 300
timeout_method = thread

# Django Test Settings
django_find_project = false
